# Amazon SQS

- 메시지를 담는 대기열 서비스
- 메시지를 대기열로 보내는 주체를 생산자(Producer), 메시지를 대기열에서 꺼내는 주체를 소비자(Consumer)라고 함.

## Amazon SQS Standard Queue

- 완전 관리형 서비스이며 애플리케이션을 분리하는데 사용
- 처리량에 제한 없음, 대기열 메시지 수 제한 없음
- 메시지는 대기열에 기본 4일, 최대 14일까지 남아 있을 수 있음
- 메시지는 최대 256kb 미만이어야 함.

## 보안

- HTTPS API를 사용하여 메시지 암호화
- KMS 키를 사용하여 암호화
- 클라이언트 암호화

## 액세스 제어

- IAM 정책을 사용하여 액세스 제어
  - SQS에 대한 교차 계정 접근 관리
  - 다른 서비스 허용

## Message Visibility Timeout

- 컨슈머가 메시지를 폴링하면 해당 메세지는 다른 컨슈머에게 보이지 않게 된다.
- 시간 초과가 되고 메시지가 삭제되지 않으면 다시 대기열에 들어가게 되고, 동일한 또른 다른 컨슈머가 중복으로 메세지를 받게 되는 경우가 생김
- 메시지를 처리하는데 시간이 더 필요하고 두 번 처리하고 싶지 않다면 컨슈머는 ChangeMessageVisibility API를 호출해서 SQS에게 알려야 한다.

## Long Polling

- 대기열이 비었을때 메시지 도착을 기다리는 것
- 지연시간을 줄이고 API 호출 횟수를 줄이기 위함.

## FIFO Queue

- 선입선출로 메시지를 처리
- 순서를 보장하기 때문에 처리량 제한 있음
- 중복 제거 기능 제공
